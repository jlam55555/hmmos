<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HmmOS: sched::Scheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HmmOS
   </div>
   <div id="projectbrief">System for Operating</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>sched</b></li><li class="navelem"><a class="el" href="classsched_1_1Scheduler.html">Scheduler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classsched_1_1Scheduler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sched::Scheduler Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for sched::Scheduler:</div>
<div class="dyncontent">
<div class="center"><img src="classsched_1_1Scheduler__inherit__graph.png" border="0" usemap="#asched_1_1Scheduler_inherit__map" alt="Inheritance graph"/></div>
<map name="asched_1_1Scheduler_inherit__map" id="asched_1_1Scheduler_inherit__map">
<area shape="rect" title=" " alt="" coords="19,5,151,31"/>
<area shape="rect" href="classsched_1_1TestScheduler.html" title=" " alt="" coords="5,79,164,104"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3eae557ef68e1eaa17896a2c1dc5b48e"><td class="memItemLeft" align="right" valign="top">ThreadID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsched_1_1Scheduler.html#a3eae557ef68e1eaa17896a2c1dc5b48e">bootstrap</a> ()</td></tr>
<tr class="separator:a3eae557ef68e1eaa17896a2c1dc5b48e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30e50d61e74f44008edbc0e317a43cc3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsched_1_1Scheduler.html#a30e50d61e74f44008edbc0e317a43cc3">schedule</a> ()</td></tr>
<tr class="memdesc:a30e50d61e74f44008edbc0e317a43cc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select the next runnable process in round-robin order, and actually switch stacks.  <br /></td></tr>
<tr class="separator:a30e50d61e74f44008edbc0e317a43cc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1de099834b6ba092fa99becdcbc5468"><td class="memItemLeft" align="right" valign="top">ThreadID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsched_1_1Scheduler.html#ac1de099834b6ba092fa99becdcbc5468">new_thread</a> (<a class="el" href="classproc_1_1Process.html">proc::Process</a> *proc, void(*fcn)(void *), void *data)</td></tr>
<tr class="separator:ac1de099834b6ba092fa99becdcbc5468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf50e8c93dd234e37c34215261f013b1"><td class="memItemLeft" align="right" valign="top"><a id="abf50e8c93dd234e37c34215261f013b1" name="abf50e8c93dd234e37c34215261f013b1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print_stats</b> () const</td></tr>
<tr class="memdesc:abf50e8c93dd234e37c34215261f013b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print scheduler stats, for debugging purposes. <br /></td></tr>
<tr class="separator:abf50e8c93dd234e37c34215261f013b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cce6adda77c0c6d1f7f2ae46b6c2e9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsched_1_1Scheduler.html#a1cce6adda77c0c6d1f7f2ae46b6c2e9d">destroy_thread</a> (ThreadID tid)</td></tr>
<tr class="memdesc:a1cce6adda77c0c6d1f7f2ae46b6c2e9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a thread.  <br /></td></tr>
<tr class="separator:a1cce6adda77c0c6d1f7f2ae46b6c2e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ac234f0168275884b4f94eb8450122f"><td class="memItemLeft" align="right" valign="top"><a id="a6ac234f0168275884b4f94eb8450122f" name="a6ac234f0168275884b4f94eb8450122f"></a>
<a class="el" href="classproc_1_1Process.html">proc::Process</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>curr_proc</b> () const</td></tr>
<tr class="separator:a6ac234f0168275884b4f94eb8450122f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9179d5c418fde1086bc9d52a8a6bdab2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsched_1_1Scheduler.html#a9179d5c418fde1086bc9d52a8a6bdab2">override_curr_proc</a> (<a class="el" href="classproc_1_1Process.html">proc::Process</a> *proc)</td></tr>
<tr class="separator:a9179d5c418fde1086bc9d52a8a6bdab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a3f66197b429debd9f0020f16dbcdf4f6"><td class="memItemLeft" align="right" valign="top"><a id="a3f66197b429debd9f0020f16dbcdf4f6" name="a3f66197b429debd9f0020f16dbcdf4f6"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>TestScheduler</b></td></tr>
<tr class="separator:a3f66197b429debd9f0020f16dbcdf4f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3eae557ef68e1eaa17896a2c1dc5b48e" name="a3eae557ef68e1eaa17896a2c1dc5b48e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eae557ef68e1eaa17896a2c1dc5b48e">&#9670;&#160;</a></span>bootstrap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ThreadID sched::Scheduler::bootstrap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enter the scheduler. This should be called in live but doesn't need to be called when unit-testing scheduler functionality. </p>

</div>
</div>
<a id="a1cce6adda77c0c6d1f7f2ae46b6c2e9d" name="a1cce6adda77c0c6d1f7f2ae46b6c2e9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cce6adda77c0c6d1f7f2ae46b6c2e9d">&#9670;&#160;</a></span>destroy_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sched::Scheduler::destroy_thread </td>
          <td>(</td>
          <td class="paramtype">ThreadID&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy a thread. </p>
<p>If the provided thread is not the running thread, then it is destroyed immediately. If it is the running thread, then we schedule away and defer the deletion until after scheduling away.</p>
<p>Note that there are no safeguards against destroying all runnable threads such that there are no schedulable threads remaining.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>the thread to destroy, or nullptr to destroy the currently-running thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac1de099834b6ba092fa99becdcbc5468" name="ac1de099834b6ba092fa99becdcbc5468"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1de099834b6ba092fa99becdcbc5468">&#9670;&#160;</a></span>new_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ThreadID sched::Scheduler::new_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproc_1_1Process.html">proc::Process</a> *&#160;</td>
          <td class="paramname"><em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>fcn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new thread that will start execution at the given fcn. <em>proc</em> can be nullptr if this thread is not associated with a userspace process. </p>

</div>
</div>
<a id="a9179d5c418fde1086bc9d52a8a6bdab2" name="a9179d5c418fde1086bc9d52a8a6bdab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9179d5c418fde1086bc9d52a8a6bdab2">&#9670;&#160;</a></span>override_curr_proc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sched::Scheduler::override_curr_proc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproc_1_1Process.html">proc::Process</a> *&#160;</td>
          <td class="paramname"><em>proc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Ugly hack that should only be used in the <a class="el" href="classproc_1_1Process.html">proc::Process</a> constructor. We want to run kernel code from the context of the newly created process, but this code should be run immediately from the parent process. </p>

</div>
</div>
<a id="a30e50d61e74f44008edbc0e317a43cc3" name="a30e50d61e74f44008edbc0e317a43cc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30e50d61e74f44008edbc0e317a43cc3">&#9670;&#160;</a></span>schedule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sched::Scheduler::schedule </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Select the next runnable process in round-robin order, and actually switch stacks. </p>
<p>This will throw if there are no schedulable tasks remaining. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/kernel/sched/<a class="el" href="kthread_8h_source.html">kthread.h</a></li>
<li>src/kernel/sched/kthread.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
